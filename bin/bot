#!/usr/bin/env ruby

require 'redis'
require_relative '../lib/cominout_bot'
require_relative '../lib/parse_imdb'
require_relative '../lib/parse_wikipedia'

IMDB_DB = 'lgbt:imdb'.freeze
WIKI_DB = 'lgbt:wiki'.freeze

db = Redis.new
if not db.exists "#{WIKI_DB}:1"
  puts 'Parsing wikipedia.org'
  ParseWikipedia.new.run
end
if not db.exists "#{IMDB_DB}"
  puts 'Parsing IMDB.com ...'
  ParseImdb.new.run
end
puts 'Starting bot'
CominoutBot.new.run
